{"programModules":{"EXT022MI":{"program":"EXT022MI","triggers":{},"transactions":{"UpdPDS022":{"sourceUuid":"ba89ae11-e4f2-42ec-acf0-467b2709636b","name":"UpdPDS022","program":"EXT022MI","description":"Update MPDSST","active":true,"multi":false,"modified":1697705686927,"modifiedBy":"LUDTRA","outputFields":[],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":true,"type":"N"},{"name":"FACI","description":"Facility","length":3,"mandatory":true,"type":"A"},{"name":"PLGR","description":"Work center","length":8,"mandatory":true,"type":"A"},{"name":"CMKY","description":"Current MO key","length":20,"mandatory":true,"type":"A"},{"name":"CKTP","description":"Current MO key type","length":1,"mandatory":true,"type":"A"},{"name":"CSTY","description":"Current structure type","length":3,"mandatory":true,"type":"A"},{"name":"PMKY","description":"Previous MO key","length":20,"mandatory":false,"type":"A"},{"name":"PKTP","description":"Previous MO key type","length":1,"mandatory":false,"type":"A"},{"name":"PSTY","description":"Previous structure type","length":3,"mandatory":false,"type":"A"},{"name":"FDAT","description":"From date","length":8,"mandatory":false,"type":"N"},{"name":"TDAT","description":"To date","length":8,"mandatory":false,"type":"N"},{"name":"SETI","description":"Setup time","length":9,"mandatory":false,"type":"N"},{"name":"MXID","description":"Selection matrix","length":5,"mandatory":false,"type":"A"},{"name":"CMAC","description":"Current MO matrix column","length":1,"mandatory":false,"type":"N"},{"name":"PMAC","description":"Previous MO matrix column","length":1,"mandatory":false,"type":"N"},{"name":"SETT","description":"Setup time type","length":1,"mandatory":false,"type":"A"}],"utilities":["DateUtil","NumberUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"ba89ae11-e4f2-42ec-acf0-467b2709636b":{"uuid":"ba89ae11-e4f2-42ec-acf0-467b2709636b","updated":1701689047198,"updatedBy":"LUDTRA","created":1697705616117,"createdBy":"LUDTRA","apiVersion":"0.9","beVersion":"16.0.0.20230918173517.8","language":"GROOVY","codeHash":"5E0FC6C3524C38E0632E479129BE0D7211CB91B0DEF74234A8D3CE42D4A26388","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgZXh0ZW5zaW9uIGlzIGJlaW5nIHRyaWdnZXJlZCBieSBFWFQwMjJNSS9VcGRQRFMwMjINCiAqDQogKiBOYW1lOiBVcGRQRFMwMjINCiAqIERlc2NyaXB0aW9uOiBYVGVuZCBtYWRlIHRvIHVwZGF0ZSBhbiBlbnJlZyBpbiBNUERTU1QgDQogKiBEYXRlICAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbg0KICogMjAyMzEwMTMgICBMdWRvdmljIFRSQVZFUlMgICAgICAgICAgICAgICAgQ3JlYXRlIEVYVDAyMk1JX1VwZFBEUzAyMg0KICovDQogDQpwdWJsaWMgY2xhc3MgVXBkUERTMDIyIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICBwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eQ0KICANCiAgcHVibGljIFVwZFBEUzAyMihNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgVXRpbGl0eUFQSSB1dGlsaXR5LCBNSUNhbGxlckFQSSBtaUNhbGxlcikgew0KICAgIHRoaXMubWkgPSBtaQ0KICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQ0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgICB0aGlzLnV0aWxpdHkgPSB1dGlsaXR5DQogIH0NCg0KICBpbnQgY29ubw0KICBpbnQgY2hubw0KICBTdHJpbmcgY2hpZA0KICBTdHJpbmcgZmFjaQ0KICBTdHJpbmcgcGxncg0KICANCiAgY2hhciBja3RwDQogIFN0cmluZyBjbWt5DQogIFN0cmluZyBjc3R5DQogIGNoYXIgcGt0cA0KICBTdHJpbmcgcG1reQ0KICBTdHJpbmcgcHN0eQ0KICANCiAgaW50IGZkYXQNCiAgaW50IHRkYXQNCiAgU3RyaW5nIGZkYXRTDQogIFN0cmluZyB0ZGF0Uw0KICANCiAgZG91YmxlIHNldGkNCiAgU3RyaW5nIG14aWQNCiAgaW50IGNtYWMNCiAgaW50IHBtYWMNCiAgY2hhciBzZXR0DQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGNvbm8gPSAoSW50ZWdlcikgcHJvZ3JhbS5nZXRMREFaRCgpLkNPTk8NCiAgICBpZiAoIW1pLmluRGF0YS5nZXQoIkNPTk8iKS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBjb25vID0gdXRpbGl0eS5jYWxsKCJOdW1iZXJVdGlsIiwicGFyc2VTdHJpbmdUb0ludGVnZXIiLCBtaS5pbkRhdGEuZ2V0KCJDT05PIikpDQogICAgfQ0KICAgIGNoaWQgPSBwcm9ncmFtLmdldFVzZXIoKQ0KICAgIA0KICAgIGZhY2kgPSBtaS5pbkRhdGEuZ2V0KCJGQUNJIikudHJpbSgpDQogICAgcGxnciA9IG1pLmluRGF0YS5nZXQoIlBMR1IiKS50cmltKCkNCiAgICBja3RwID0gbWkuaW5EYXRhLmdldCgiQ0tUUCIpLmNoYXJBdCgwKQ0KICAgIGNta3kgPSBtaS5pbkRhdGEuZ2V0KCJDTUtZIikudHJpbSgpDQogICAgY3N0eSA9IG1pLmluRGF0YS5nZXQoIkNTVFkiKS50cmltKCkNCiAgICBwa3RwID0gbWkuaW5EYXRhLmdldCgiUEtUUCIpLmNoYXJBdCgwKQ0KICAgIHBta3kgPSBtaS5pbkRhdGEuZ2V0KCJQTUtZIikudHJpbSgpDQogICAgcHN0eSA9IG1pLmluRGF0YS5nZXQoIlBTVFkiKS50cmltKCkNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNUERTU1QiKQ0KICAgICAgLmluZGV4KCIwMCIpDQogICAgICAuYnVpbGQoKQ0KICAgIA0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgDQogICAgY29udGFpbmVyLnNldCgiUFRDT05PIiwgY29ubykNCiAgICANCiAgICBjb250YWluZXIuc2V0KCJQVEZBQ0kiLCBtaS5pbkRhdGEuZ2V0KCJGQUNJIikudHJpbSgpKQ0KICAgIGNvbnRhaW5lci5zZXQoIlBUUExHUiIsIG1pLmluRGF0YS5nZXQoIlBMR1IiKS50cmltKCkpDQogIA0KICAgIGlmICghbWkuaW5EYXRhLmdldCgiQ0tUUCIpLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIGNvbnRhaW5lci5zZXQoIlBUQ0tUUCIsIG1pLmluRGF0YS5nZXQoIkNLVFAiKS5jaGFyQXQoMCkpDQogICAgfQ0KICAgIGVsc2Ugew0KICAgICAgY29udGFpbmVyLnNldCgiUFRDS1RQIiwgJyAnKQ0KICAgIH0NCiAgICANCiAgICBjb250YWluZXIuc2V0KCJQVENNS1kiLCBtaS5pbkRhdGEuZ2V0KCJDTUtZIikudHJpbSgpKQ0KICAgIA0KICAgIGNvbnRhaW5lci5zZXQoIlBUQ1NUWSIsIG1pLmluRGF0YS5nZXQoIkNTVFkiKS50cmltKCkpDQogICAgDQogICAgaWYgKCFtaS5pbkRhdGEuZ2V0KCJQS1RQIikudHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgY29udGFpbmVyLnNldCgiUFRQS1RQIiwgbWkuaW5EYXRhLmdldCgiUEtUUCIpLmNoYXJBdCgwKSkNCiAgICB9DQogICAgZWxzZSB7DQogICAgICBjb250YWluZXIuc2V0KCJQVFBLVFAiLCAnICcpDQogICAgfQ0KICAgIA0KICAgIGNvbnRhaW5lci5zZXQoIlBUUE1LWSIsIG1pLmluRGF0YS5nZXQoIlBNS1kiKS50cmltKCkpDQogICAgY29udGFpbmVyLnNldCgiUFRQU1RZIiwgbWkuaW5EYXRhLmdldCgiUFNUWSIpLnRyaW0oKSkNCiAgIA0KICAgIGZkYXQgPSB1dGlsaXR5LmNhbGwoIk51bWJlclV0aWwiLCJwYXJzZVN0cmluZ1RvSW50ZWdlciIsIG1pLmluRGF0YS5nZXQoIkZEQVQiKSkNCiAgICBmZGF0UyA9IG1pLmluRGF0YS5nZXQoIkZEQVQiKS50cmltKCkNCiAgIA0KICAgIGNvbnRhaW5lci5zZXQoIlBURkRBVCIsIGZkYXQpDQogICAgDQogICAgDQogICAgQ2xvc3VyZTw/PiB1cGRhdGVDYWxsQmFjayA9IHsgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPg0KICAgIA0KICAgICAgdGRhdCA9IHV0aWxpdHkuY2FsbCgiTnVtYmVyVXRpbCIsInBhcnNlU3RyaW5nVG9JbnRlZ2VyIiwgbWkuaW5EYXRhLmdldCgiVERBVCIpKQ0KICAgICAgdGRhdFMgPSBtaS5pbkRhdGEuZ2V0KCJUREFUIikudHJpbSgpDQogIA0KICAgICAgaWYgKCF0ZGF0Uy5pc0VtcHR5KCkpIHsNCiAgICAgICAgaWYgKCF1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwiaXNEYXRlVmFsaWQiLCB0ZGF0UywgInl5eXlNTWRkIikpIHsNCiAgICAgICAgICAgbWkuZXJyb3IoIkRhdGUgZGUgZmluICR0ZGF0UyBuJ2VzdCBwYXMgdmFsaWRlIikNCiAgICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmICh0ZGF0IDwgZmRhdCkgew0KICAgICAgICAgICBtaS5lcnJvcigiRGF0ZSBkZSBmaW4gJHRkYXRTIG5lIHBldXQgcGFzIMOqdHJlIGluZsOpcmlldXJlIMOgIGRhdGUgZGUgZMOpYnV0ICRmZGF0UyAiKQ0KICAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJQVFREQVQiLCB0ZGF0KQ0KICAgDQogICAgICBzZXRpID0gdXRpbGl0eS5jYWxsKCJOdW1iZXJVdGlsIiwicGFyc2VTdHJpbmdUb0RvdWJsZSIsIG1pLmluRGF0YS5nZXQoIlNFVEkiKSkNCiAgICAgIG14aWQgPSBtaS5pbkRhdGEuZ2V0KCJNWElEIikudHJpbSgpDQogICAgICBpZiAoc2V0aSA8IDApIHsNCiAgICAgICAgbWkuZXJyb3IoIlNldHVwIHRpbWUgJHNldGkgaXMgaW52YWxpZCIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgDQogICAgICBpZiAoKHNldGkgPiAwKSAmJiAhbXhpZC5pc0VtcHR5KCkpIHsNCiAgICAgICAgbWkuZXJyb3IoIk9ubHkgb25lIG9mIHNldHVwIHRpbWUgYW5kIG1hdHJpeF9JRCBzaG91bGQgYmUgZW50ZXJlZCIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KDQogICAgICBjbWFjID0gdXRpbGl0eS5jYWxsKCJOdW1iZXJVdGlsIiwicGFyc2VTdHJpbmdUb0ludGVnZXIiLCBtaS5pbkRhdGEuZ2V0KCJDTUFDIikpDQogICAgICBwbWFjID0gdXRpbGl0eS5jYWxsKCJOdW1iZXJVdGlsIiwicGFyc2VTdHJpbmdUb0ludGVnZXIiLCBtaS5pbkRhdGEuZ2V0KCJQTUFDIikpDQogICAgICBpZiAoIW14aWQuaXNFbXB0eSgpKSB7DQogICAgICAgIGlmICghY2hlY2tNUE1YSUQobXhpZCkpIHsNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgDQogICAgICBzZXR0ID0gbWkuaW5EYXRhLmdldCgiU0VUVCIpLmNoYXJBdCgwKQ0KICAgICAgaWYgKChzZXR0ICE9ICcxJykgJiYgKHNldHQgIT0gJzInKSkgew0KICAgICAgICBtaS5lcnJvcigiU2V0dXAgdGltZSB0eXBlICRzZXR0IGlzIGludmFsaWQiKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIA0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiUFRTRVRJIiwgdXRpbGl0eS5jYWxsKCJOdW1iZXJVdGlsIiwicGFyc2VTdHJpbmdUb0RvdWJsZSIsIG1pLmluRGF0YS5nZXQoIlNFVEkiKSkpDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJQVE1YSUQiLCBtaS5pbkRhdGEuZ2V0KCJNWElEIikudHJpbSgpKSAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJQVENNQUMiLCB1dGlsaXR5LmNhbGwoIk51bWJlclV0aWwiLCJwYXJzZVN0cmluZ1RvSW50ZWdlciIsIG1pLmluRGF0YS5nZXQoIkNNQUMiKSkpDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJQVFBNQUMiLCB1dGlsaXR5LmNhbGwoIk51bWJlclV0aWwiLCJwYXJzZVN0cmluZ1RvSW50ZWdlciIsIG1pLmluRGF0YS5nZXQoIlBNQUMiKSkpDQogICAgICBpZiAoIW1pLmluRGF0YS5nZXQoIlNFVFQiKS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIlBUU0VUVCIsIG1pLmluRGF0YS5nZXQoIlNFVFQiKS5jaGFyQXQoMCkpDQogICAgICB9DQogICAgICBlbHNlIHsNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiUFRTRVRUIiwgJyAnKQ0KICAgICAgfQ0KICAgICANCiAgICAgIGNobm8gPSBsb2NrZWRSZXN1bHQuZ2V0KCJQVENITk8iKQ0KICAgICAgY2hubysrDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJQVExNRFQiLCB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwiY3VycmVudERhdGVZOEFzSW50IikpDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJQVENITk8iLCBjaG5vKQ0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiUFRDSElEIiwgY2hpZCkNCiAgICAgIA0KICAgICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpDQogICAgfQ0KICAgIA0KICAgIGlmICghcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVDYWxsQmFjaykpIHsNCiAgICAgIG1pLmVycm9yKCJMJ2VucmVnaXN0cmVtZW50IG4nZXhpc3RlIHBhcy4iKQ0KICAgIH0NCiAgfQ0KICANCiAgLyoqDQogICogT24gdsOpcmlmaWUgc2kgbGUgcHJvZHVpdCBwYXNzw6kgZW4gcGFyYW3DqHRyZSBkJ2VudHLDqWUgZXhpc3RlIGRhbnMgTVBNWElEDQogICovDQogIHByaXZhdGUgYm9vbGVhbiBjaGVja01QTVhJRChTdHJpbmcgTVhJRCkgew0KICAgIGludCBNWFRQID0gMA0KICAgIGludCBYSSA9IGNtYWMgKyBwbWFjDQogICAgDQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTVBNWElEIikNCiAgICAgIC5pbmRleCgiMDAiKQ0KICAgICAgLnNlbGVjdGlvbigiUUFNWFRQIikNCiAgICAgIC5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJRQUNPTk8iLCBjb25vKQ0KICAgIGNvbnRhaW5lci5zZXQoIlFBTVhJRCIsIE1YSUQpDQogICAgaWYgKCFxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsNCiAgICAgIG1pLmVycm9yKCJTY2FsZSAkTVhJRCBkb2VzIG5vdCBleGlzdCIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgZWxzZSB7DQogICAgICBNWFRQID0gY29udGFpbmVyLmdldCgiUUFNWFRQIikNCiAgICAgIGlmIChNWFRQICE9IDEpIHsNCiAgICAgICAgbWkuZXJyb3IoIlNlbGVjdGlvbiBtYXRyaXggdHlwZSAmTVhJRCBpcyBpbnZhbGlkIikNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICBpZiAoWEkgPT0gMCkgew0KICAgICAgICBtaS5lcnJvcigiQ29sdW1uICZjbWFjIGRvZXMgbm90IGV4aXN0IikNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICBpZiAoWEkgPiA5KSB7DQogICAgICAgIG1pLmVycm9yKCJDb2x1bW4gJlhJIGlzIGludmFsaWQiKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIHRydWUNCiAgfSANCn0="}}}